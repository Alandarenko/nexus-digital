# Полный аудит сайта NEXUS Digital

**URL:** https://nexus-digital-lovat.vercel.app
**Дата:** 2026-02-13
**Файлы проекта:** index.html, market.html, trends.html, tech.html, brief.html, deck.html, api/send.js, robots.txt, sitemap.xml

---

## Сводка

| Категория | Оценка | Критических | Средних | Мелких |
|-----------|--------|-------------|---------|--------|
| Дизайн и UX | 7/10 | 0 | 3 | 3 |
| SEO | 7/10 | 1 | 3 | 2 |
| Производительность | 5/10 | 2 | 3 | 2 |
| Безопасность | 4/10 | 2 | 3 | 1 |
| Код и архитектура | 5/10 | 1 | 4 | 2 |
| Контент и функциональность | 7/10 | 0 | 2 | 3 |
| **Общая оценка** | **5.8/10** | **6** | **18** | **13** |

---

## Проблемы по приоритету

### CRITICAL

**1. [Безопасность] Нет Content-Security-Policy (CSP)**
- **Файл:** отсутствует `vercel.json`
- **Что не так:** Сервер не отправляет CSP-заголовок. Любой инъектированный скрипт выполнится без ограничений. Актуальные заголовки: только `strict-transport-security` от Vercel по умолчанию. Нет `X-Frame-Options`, `X-Content-Type-Options`, `Referrer-Policy`, `Permissions-Policy`.
- **Как исправить:** Создать `vercel.json` с секцией `headers` для всех маршрутов. Минимум: `Content-Security-Policy: default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline' fonts.googleapis.com; font-src fonts.gstatic.com`, `X-Frame-Options: DENY`, `X-Content-Type-Options: nosniff`, `Referrer-Policy: strict-origin-when-cross-origin`, `Permissions-Policy: camera=(), microphone=(), geolocation=()`.
- **Статус:** [x] исправлено — создан vercel.json с CSP, X-Frame-Options, X-Content-Type-Options, Referrer-Policy, Permissions-Policy, COOP

**2. [Безопасность] XSS-уязвимость в форме брифа**
- **Файл:** `index.html:1940`
- **Что не так:** Функция `bShowResults()` вставляет пользовательский ввод (`bV()`, `bC()`) напрямую в `innerHTML` без экранирования HTML. Пользователь может ввести `<img src=x onerror=alert(1)>` в поле "Имя" или "Задача", и скрипт исполнится.
- **Как исправить:** Экранировать HTML-спецсимволы (`<`, `>`, `&`, `"`, `'`) перед вставкой в `innerHTML`, или использовать `textContent`/DOM API вместо строковой сборки HTML.
- **Статус:** [x] исправлено — добавлена функция escHtml(), применена к bShowResults()

**3. [Безопасность] XSS в серверном API через Telegram sendMessage**
- **Файл:** `api/send.js:14`
- **Что не так:** Поля `fields.name`, `fields.desc` и другие подставляются в Markdown-файл без санитизации. Хоть это и не прямая XSS на сайте, вредоносный контент может быть доставлен в Telegram через бриф.
- **Как исправить:** Валидировать и санитизировать входящие данные на сервере (максимальная длина, запрет HTML-тегов).
- **Статус:** [x] исправлено — sanitize() с лимитами длины и удалением HTML-тегов

**4. [Производительность] Шрифт загружается через @import внутри `<style>`**
- **Файл:** `index.html:72`, `market.html:42`, `trends.html:42`, `tech.html:42`
- **Что не так:** `@import url('https://fonts.googleapis.com/css2?...')` внутри `<style>` — это render-blocking цепочка: парсер CSS → загрузка CSS-файла Google → загрузка .woff2. Блокирует рендер. Особенно критично т.к. запрашивается **7 начертаний** (300-900), а используется реально 4-5.
- **Как исправить:** Заменить `@import` на `<link rel="preload" as="style">` или `<link rel="stylesheet">` в `<head>`. Убрать неиспользуемые начертания (300, 900 вероятно не нужны). Добавить `&display=swap` (уже есть).
- **Статус:** [x] исправлено — @import заменён на <link rel="stylesheet">, wght@400;500;600;700;800 во всех 6 файлах

**5. [Производительность] 89 КБ HTML в одном файле (index.html)**
- **Файл:** `index.html` — 88 940 байт, 2025 строк
- **Что не так:** Весь CSS (~1236 строк), HTML и JS в одном файле. Не минифицирован. Для одностраничного сайта это чрезмерно. При повторных визитах CSS не кэшируется отдельно.
- **Как исправить:** Вынести CSS в отдельный файл (кэширование). Минифицировать HTML/CSS/JS перед деплоем.
- **Статус:** [ ] не исправлено

**6. [Код] Массовое дублирование CSS между файлами**
- **Файлы:** Все 6 HTML-файлов содержат полную копию CSS-переменных, навигации, стилей
- **Что не так:** CSS дублируется в каждом файле. При изменении дизайна нужно менять 6 файлов. `brief.html` — 77 КБ. Общий объём HTML: 247 КБ, из которых ~60% — дублированный CSS.
- **Как исправить:** Вынести общий CSS в `styles.css`. Подключать через `<link rel="stylesheet">`.
- **Статус:** [ ] не исправлено

---

### HIGH

**7. [SEO] Нет og:image и twitter:image**
- **Файл:** `index.html:11-22`, `market.html:11-22`, `trends.html:11-22`, `tech.html:11-22`
- **Что не так:** Все страницы указывают `og:title`, `og:description`, но **не указывают `og:image`**. При шаринге в соцсетях (Telegram, VK, Facebook) ссылка будет без превью-картинки.
- **Как исправить:** Создать OG-изображение 1200x630px для каждой страницы (или хотя бы одно общее). Добавить `<meta property="og:image" content="https://nexus-digital-lovat.vercel.app/og-image.png">`.
- **Статус:** [x] исправлено — og:image и twitter:image добавлены во все 4 страницы

**8. [SEO] sitemap.xml не включает все страницы**
- **Файл:** `sitemap.xml`
- **Что не так:** Перечислены 4 страницы (index, market, trends, tech). Пропущены: `brief.html`, `deck.html`.
- **Как исправить:** Добавить `brief.html` и `deck.html` в sitemap (если они должны индексироваться). Если `deck.html` не для индексации — добавить `<meta name="robots" content="noindex">`.
- **Статус:** [x] исправлено — brief.html добавлен в sitemap, deck.html получил noindex

**9. [SEO] Нет favicon и apple-touch-icon**
- **Файл:** все HTML-файлы
- **Что не так:** Ни в одном файле нет `<link rel="icon">` или `<link rel="apple-touch-icon">`. Файл `favicon.ico` отсутствует в проекте. Браузер генерирует 404 при запросе favicon.
- **Как исправить:** Создать favicon.ico (32x32, 16x16), apple-touch-icon.png (180x180), подключить в `<head>`.
- **Статус:** [x] исправлено — SVG favicon создан и подключён во всех файлах

**10. [Код/A11y] Нет `<main>` элемента**
- **Файл:** `index.html:1238-1648`
- **Что не так:** Страница использует `<nav>`, `<section>`, `<footer>`, но нет `<main>`. Скринридеры и поисковики не могут определить основной контент. Нарушение WCAG 1.3.1 (Info and Relationships).
- **Как исправить:** Обернуть секции между `<nav>` и `<footer>` в `<main>`.
- **Статус:** [x] исправлено — добавлен <main id="main-content">

**11. [Код/A11y] Нет skip-navigation ссылки**
- **Файл:** `index.html`
- **Что не так:** Пользователи клавиатуры и скринридеров вынуждены проходить через всю навигацию при каждом page load. Нет ссылки "Перейти к содержимому" (WCAG 2.4.1).
- **Как исправить:** Добавить скрытую ссылку `<a href="#main-content" class="skip-nav">Перейти к содержимому</a>` в начало `<body>`, показывать при фокусе.
- **Статус:** [x] исправлено — добавлен skip-nav с CSS

**12. [Безопасность] Нет Rate Limiting на API отправки брифа**
- **Файл:** `api/send.js`
- **Что не так:** API `/api/send` не имеет ограничений по количеству запросов. Злоумышленник может спамить бриф-форму, перегружая Telegram Bot API и заполняя чат тысячами сообщений.
- **Как исправить:** Добавить rate limiting через Vercel Edge Middleware или хотя бы простую проверку по IP (X-Forwarded-For) с лимитом 5 запросов в минуту.
- **Статус:** [x] исправлено — in-memory rate limiter, 5 req/min per IP

**13. [Безопасность] Нет CSRF-защиты на форме**
- **Файл:** `index.html:1978`, `api/send.js`
- **Что не так:** API принимает POST без проверки происхождения запроса. Любой сторонний сайт может отправить бриф от имени пользователя.
- **Как исправить:** Проверять заголовок `Origin` или `Referer` на сервере. Или добавить проверку на Vercel через `vercel.json` CORS-настройки.
- **Статус:** [x] исправлено — проверка Origin/Referer в api/send.js

---

### MEDIUM

**14. [Дизайн/UX] Контраст nav-ссылок недостаточен**
- **Файл:** `index.html:141-147`
- **Что не так:** Nav-ссылки: `color: var(--text-secondary)` (#9ca3af) на фоне `rgba(10, 10, 15, 0.85)` (~#0a0a0f). Контраст ~6.5:1 — проходит WCAG AA для мелкого текста. Но `font-size: 14px` при `font-weight: 500` — пограничная читаемость. `--text-muted` (#6b7280) на `--bg-primary` (#0a0a0f) дает ~4.5:1 — ровно на границе.
- **Как исправить:** Увеличить `--text-muted` до #7c8595 или использовать `--text-secondary` вместо `--text-muted` для интерактивных элементов.
- **Статус:** [x] исправлено — --text-muted изменён на #7c8595

**15. [Дизайн/UX] Тач-таргеты в навигации слишком малы**
- **Файл:** `index.html:141-147`
- **Что не так:** Nav-ссылки имеют только текстовую область без padding. На мобильных тач-зона < 44x44px (рекомендация WCAG 2.5.8, минимум 24x24px в WCAG 2.2). Burger-кнопка имеет `padding: 8px` — итого ~40x28px, меньше нормы.
- **Как исправить:** Добавить `padding: 12px` на nav-ссылки. Burger: увеличить padding до 12px.
- **Статус:** [x] исправлено

**16. [Дизайн/UX] Radio/checkbox кнопки на мобильных малы**
- **Файл:** `index.html:1220-1223`
- **Что не так:** `.b-chk label` на мобильных (480px): `padding: 10px 14px; font-size: 13px`. Итого высота ~37px — ниже 44px тач-таргета.
- **Как исправить:** Увеличить `padding: 14px 18px` для мобильных.
- **Статус:** [x] исправлено

**17. [Производительность] 7 начертаний шрифта Inter**
- **Файл:** `index.html:72`
- **Что не так:** Запрашиваются wght@300;400;500;600;700;800;900 — 7 начертаний. Каждое — отдельный glyphs-диапазон. Фактически используются: 400 (body), 500 (навигация), 600 (labels), 700 (карточки), 800 (заголовки). 300 и 900 не нужны.
- **Как исправить:** Убрать 300 и 900: `wght@400;500;600;700;800`.
- **Статус:** [x] исправлено — вместе с #4

**18. [Производительность] Нет `preload` для критического шрифта**
- **Файл:** `index.html:69-72`
- **Что не так:** Есть `preconnect` к fonts.googleapis.com/gstatic.com — хорошо. Но `@import` внутри `<style>` делает загрузку шрифта зависимой от парсинга CSS. Нет `<link rel="preload" href="...woff2" as="font">`.
- **Как исправить:** Добавить preload для основного начертания (400 или 600).
- **Статус:** [x] исправлено — preload для Inter 400 woff2

**19. [Производительность] Нет минификации**
- **Файлы:** Все HTML-файлы
- **Что не так:** HTML, CSS, JS не минифицированы. Пробелы, комментарии, отступы — всё передаётся. index.html = 89 КБ, при минификации можно ожидать ~60 КБ.
- **Как исправить:** Настроить build-шаг или использовать Vercel Build Output API с минификацией.
- **Статус:** [ ] не исправлено

**20. [SEO] Schema.org Article не имеет обязательных полей**
- **Файлы:** `market.html:25-36`, `trends.html:25-36`, `tech.html:25-36`
- **Что не так:** Schema Article указывает `headline`, `description`, `publisher`, но нет `datePublished`, `dateModified`, `author`, `image`. Google может не показать расширенный сниппет.
- **Как исправить:** Добавить `datePublished`, `dateModified`, `author` (Person или Organization), `image`.
- **Статус:** [x] исправлено — добавлены datePublished, dateModified, author

**21. [SEO] keywords meta-tag не нужен**
- **Файлы:** Все HTML-файлы
- **Что не так:** `<meta name="keywords">` — Google и Яндекс официально игнорируют этот тег с 2009 года. Не вредит, но и не помогает. Создаёт ложное чувство SEO-оптимизации.
- **Как исправить:** Можно удалить. Если хочется оставить для Яндекса (он может учитывать как слабый сигнал), оставьте 5-7 ключевых слов.
- **Статус:** [x] исправлено — keywords удалены из index.html, market.html, trends.html, tech.html

**22. [Код/A11y] Нет focus-visible стилей для интерактивных элементов**
- **Файл:** `index.html`
- **Что не так:** Единственный `:focus` стиль — на input/textarea в форме (строка 831). Кнопки, ссылки, карточки услуг — не имеют видимого фокус-индикатора. Пользователи клавиатуры не видят, где фокус (WCAG 2.4.7, 2.4.11).
- **Как исправить:** Добавить глобальный стиль: `*:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }`.
- **Статус:** [x] исправлено

**23. [Код/A11y] Service cards используют `onclick` на `<div>` без role и keyboard access**
- **Файл:** `index.html:1298`
- **Что не так:** `<div class="service-card" onclick="toggleService(this)">` — div не является интерактивным элементом. Не доступен с клавиатуры (Tab), нет `role="button"`, нет `tabindex`, нет `onkeydown` для Enter/Space.
- **Как исправить:** Заменить на `<button>` или добавить `role="button" tabindex="0"` и обработчик клавиш.
- **Статус:** [x] исправлено — role="button" tabindex="0" onkeydown

**24. [Код/A11y] Нет prefers-reduced-motion**
- **Файл:** `index.html`
- **Что не так:** Есть анимации: `fade-in` (translateY + opacity), hover-transitions на карточках (translateY(-4px)), modal animation (modalIn). Нет `@media (prefers-reduced-motion: reduce)` для отключения анимаций (WCAG 2.3.3).
- **Как исправить:** Добавить `@media (prefers-reduced-motion: reduce) { *, *::before, *::after { animation-duration: 0.01ms !important; transition-duration: 0.01ms !important; } }`.
- **Статус:** [x] исправлено

**25. [Код] Нет error handling для `sendDocument` в API**
- **Файл:** `api/send.js:48-51`
- **Что не так:** `sendDocument` вызывается, но его ответ не проверяется. Если отправка файла не удалась, сервер всё равно вернёт `{ ok: true }`.
- **Как исправить:** Проверять `response.ok` или `data.ok` от Telegram и логировать/возвращать ошибку.
- **Статус:** [x] исправлено — проверка docData.ok + console.error

**26. [Безопасность] Нет валидации длины полей на сервере**
- **Файл:** `api/send.js:4`
- **Что не так:** Сервер проверяет только `if (!text)`. Поля `fields.*` не валидируются. Можно передать 1 МБ текста в поле `desc`, что создаст огромный Markdown-файл.
- **Как исправить:** Добавить проверку длины каждого поля (name: 100 символов, desc: 5000 символов и т.д.).
- **Статус:** [x] исправлено — sanitize() с индивидуальными лимитами

**27. [Контент] Нет 404-страницы**
- **Файл:** отсутствует
- **Что не так:** При обращении к несуществующему URL Vercel показывает стандартную 404. Нет кастомной 404-страницы в стиле сайта.
- **Как исправить:** Создать `404.html` в корне проекта с навигацией обратно на главную.
- **Статус:** [x] исправлено — создан 404.html в стиле сайта

**28. [Контент] brief.html и deck.html не связаны с основной навигацией**
- **Файлы:** `index.html`, `brief.html`, `deck.html`
- **Что не так:** Отдельные страницы `brief.html` и `deck.html` не упоминаются ни в одном меню/навигации. Доступны только по прямой ссылке.
- **Как исправить:** Если они публичные — добавить в footer или меню. Если приватные — добавить `noindex`.
- **Статус:** [x] исправлено — deck.html получил noindex, brief.html в sitemap

---

### LOW

**29. [Дизайн/UX] hero-stats на десктопе используют `gap: 64px` без max-width на контейнер**
- **Файл:** `index.html:296-302`
- **Что не так:** На широких экранах (1440px+) stats могут выглядеть слишком разреженно. Мелкий недостаток, layout не ломается.
- **Как исправить:** Добавить `max-width: 700px` на `.hero-stats`.
- **Статус:** [x] исправлено

**30. [Дизайн/UX] Pricing row прячет 2 колонки на 768px, 3 на мобильных**
- **Файл:** `index.html:950-957, 1170-1194`
- **Что не так:** На планшетах скрыта колонка "Сроки", на мобильных — ещё и "Премиум". Пользователь теряет информацию. Можно показать в формате карточек.
- **Как исправить:** Рассмотреть карточный layout вместо скрытия колонок.
- **Статус:** [x] исправлено — на мобильных сроки показываются через data-timeline подпись под названием

**31. [Дизайн/UX] Межстрочный интервал для основного текста `line-height: 1.6`**
- **Файл:** `index.html:106`
- **Что не так:** 1.6 — на нижней границе оптимума (1.4-1.8), но приемлемо.
- **Статус:** [—] приемлемо, не требует исправления

**32. [SEO] canonical URL не имеет trailing slash единообразно**
- **Файл:** `index.html:9` vs `market.html:9`
- **Что не так:** Главная: `canonical: .../` (с /). Остальные: `.../market.html`. Нет единообразия, но в данном случае это корректно.
- **Статус:** [—] корректно, trailing slash на главной и .html на подстраницах — стандартная практика

**33. [Производительность] IntersectionObserver threshold 0.1 — разумно, но нет disconnect**
- **Файл:** `index.html:1739-1742`
- **Что не так:** Observer наблюдает за `.fade-in`, но не отключает наблюдение после срабатывания. Мелкая неоптимальность — элементов немного.
- **Как исправить:** Добавить `observer.unobserve(entry.target)` после добавления `visible`.
- **Статус:** [x] исправлено

**34. [Производительность] Нет `fetchpriority` на критических элементах**
- **Файл:** `index.html`
- **Что не так:** Нет изображений на странице, поэтому нет LCP-элемента для `fetchpriority="high"`. Мелкий пункт — пока нет изображений.
- **Статус:** [—] не применимо — нет изображений на странице

**35. [Код] HTML-стиль `style="..."` inline на нескольких элементах**
- **Файлы:** `index.html:1510, 1634, 1638, 1652, 1721`
- **Что не так:** 5 элементов используют inline `style="..."`. Не критично, но ломает единообразие.
- **Статус:** [x] исправлено — все 5 inline styles заменены на CSS-классы

**36. [Код] `<li>` для nav-ссылок, но `<button>` внутри `<li>` без `role`**
- **Файл:** `index.html:1247`
- **Что не так:** `<li><button class="nav-cta">` — семантически кнопка в списке навигации. Не критично, но `<a>` было бы семантически правильнее.
- **Статус:** [x] исправлено — заменён на <a> с role="button"

**37. [Контент] Нет политики конфиденциальности / оферты**
- **Файл:** `index.html`
- **Что не так:** Сайт собирает персональные данные (имя, телефон, email) через бриф, но не содержит ссылки на политику конфиденциальности. В России это требование 152-ФЗ.
- **Как исправить:** Создать страницу privacy-policy.html, добавить ссылку в footer и чекбокс согласия в форме брифа.
- **Статус:** [x] исправлено — создана privacy.html, ссылка в footer, чекбокс согласия в форме с валидацией

**38. [Контент] Нет `@media print` стилей**
- **Файл:** `index.html`
- **Что не так:** При печати страницы сохраняется тёмный фон, что расходует чернила. Нет print-оптимизации.
- **Статус:** [x] исправлено — добавлены @media print стили

**39. [Контент] "Скролл наверх" кнопка отсутствует**
- **Файл:** `index.html`
- **Что не так:** Страница длинная (~5 экранов). Нет кнопки прокрутки наверх.
- **Статус:** [x] исправлено — кнопка scroll-to-top с плавной анимацией

**40. [Код] Email-валидация слабая**
- **Файл:** `index.html:1827`
- **Что не так:** Проверка email: `!email.value.includes('@')` — это soft-warn, не ошибка. Но `abc@` пройдёт как валидный. При этом это мягкое предупреждение, так что терпимо.
- **Статус:** [x] исправлено — regex /^[^\s@]+@[^\s@]+\.[^\s@]+$/

---

## Топ-10 улучшений (максимальный эффект)

1. **Создать `vercel.json` с заголовками безопасности** — CSP, X-Frame-Options, X-Content-Type-Options, Referrer-Policy, Permissions-Policy. Защита от XSS, clickjacking, сниффинга. Одно действие закрывает 5 уязвимостей.

2. **Исправить XSS в `bShowResults()`** — экранировать пользовательский ввод перед `innerHTML`. Критическая уязвимость, быстрый фикс.

3. **Вынести CSS в отдельный файл `styles.css`** — убирает 60% дублирования кода, ускоряет кэширование, упрощает поддержку. Одно изменение улучшает и код, и производительность.

4. **Исправить загрузку шрифта: `@import` → `<link>`, убрать 300/900 начертания** — ускоряет First Contentful Paint на 200-400ms.

5. **Добавить OG-изображение** — одна картинка 1200x630 резко улучшает конверсию из соцсетей и мессенджеров при шаринге.

6. **Добавить favicon** — базовая профессиональная деталь, видна на каждой вкладке.

7. **Добавить `<main>`, skip-nav, focus-visible, prefers-reduced-motion** — 4 быстрых правки закрывают 4 проблемы accessibility.

8. **Добавить Rate Limiting на `/api/send`** — защита от спама и DDoS через форму.

9. **Добавить страницу политики конфиденциальности и чекбокс согласия** — юридическое требование 152-ФЗ при сборе персональных данных.

10. **Добавить серверную валидацию полей в `api/send.js`** — проверка длины, санитизация HTML, защита от abuse.
